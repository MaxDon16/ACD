#Лаба №1 "Задача о скобках"
#(Задача состоит из двух пунктов, но вы можете не париться и делать сразу второй)
#На вход подаётся строка, состоящая из скобок. Программа должна определить правильность введённого скобочного выражения. Савкин сказал, что программа должна работать на русском языке: "Введите строку", "Строка не существует", "Строка существует" и т.п.
#Пункт 1: В строке будут скобки только одного типа: или "()" , или "{}", или "[]"
#Пункт 2: В строке будут все три вида скобок
#Для успешной сдачи лабы оба пункта программа должна выполнять корректно (можно сделать отдельные программы на каждый пункт)

#Пример входа:
#()[({}())]

print("Введите строку состоящую из скобок () {} [] :")
a = input().strip()

# Если строка пустая
if not a:
    print("Строка не существует")
else:
    stek = []
    korrektno = True

    for simvol in a:
        if simvol == "(":
            stek.append(")")
            print(f"Добавили в стек: ) (текущий стек: {stek})")
        elif simvol == "[":
            stek.append("]")
            print(f"Добавили в стек: ] (текущий стек: {stek})")
        elif simvol == "{":
            stek.append("}")
            print(f"Добавили в стек: }} (текущий стек: {stek})")

        elif simvol in [")", "]", "}"]:
            if not stek:  #Если стек пуст - ошибка
                print(f"Ошибка: закрывающая '{simvol}' без открывающей")
                korrektno = False
                break
            else:
                ozhidaemaya = stek.pop() 
                print(f"Ожидали: {ozhidaemaya}, получили: {simvol} (стек: {stek})")
                if simvol != ozhidaemaya:
                    print(f"Ошибка: несоответствие скобок! Ожидали {ozhidaemaya}, получили {simvol}")
                    korrektno = False
                    break

    # Проверяем результат
    if korrektno and not stek:  # Все скобки закрыты и порядок правильный
        print("Строка существует")
    else:
        print("Строка не существует")
